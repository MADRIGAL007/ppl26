import{a as R}from"./chunk-UJYMHVUW.js";import{a as V}from"./chunk-PD6LZFPU.js";import{d as A,g as L,i as k,k as w}from"./chunk-37M6D54L.js";import{a as F}from"./chunk-BWTLYIA6.js";import{d as N}from"./chunk-V5KHZ7ZF.js";import{Ba as I,Da as a,Ea as d,Fa as E,La as m,O as t,T as y,V as _,Wa as P,X as b,Y as s,aa as C,ea as n,fa as o,ka as f,la as O,mb as S,ra as l,sa as g,t as x,ta as c,u as v,va as T,wa as M,xa as D,za as B}from"./chunk-SB5IJCBE.js";var z=i=>({email:i}),j=i=>({seconds:i});function q(i,p){if(i&1&&(n(0,"div",11),l(1),a(2,"translate"),o()),i&2){let r=O();s("background",r.badgeBg())("color",r.badgeColor())("border-color",r.badgeBorder()),t(),c(" ",d(2,7,"EMAIL_OTP.BADGE")," ")}}function G(i,p){i&1&&(n(0,"div",4)(1,"span",12),l(2,"error_outline"),o(),n(3,"div")(4,"p",13),l(5),a(6,"translate"),o(),n(7,"p",14),l(8),a(9,"translate"),o()()()),i&2&&(t(5),g(d(6,2,"EMAIL_OTP.INVALID_TITLE")),t(3),g(d(9,4,"EMAIL_OTP.INVALID_DESC")))}var W=class i{constructor(){this.state=x(S);this.otp="";this.timer=y(0);this.theme=m(()=>this.state.currentFlow()?.theme);this.headerColor=m(()=>this.theme()?.input.textColor||"#003087");this.textColor=m(()=>this.theme()?.input.textColor||"#6b7280");this.primaryColor=m(()=>this.theme()?.button.background||"#003087");this.showBadge=m(()=>this.theme()?.mode!=="dark");this.badgeBg=m(()=>(this.theme()?.button.background||"#003087")+"10");this.badgeColor=m(()=>this.theme()?.button.background);this.badgeBorder=m(()=>(this.theme()?.button.background||"#003087")+"30");this.startTimer()}ngAfterViewInit(){}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval)}startTimer(){this.timer.set(60),this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=setInterval(()=>{this.timer.update(p=>p<=1?(clearInterval(this.timerInterval),0):p-1)},1e3)}onInput(p){let r=p.replace(/\D/g,"");r!==p&&(this.otp=r)}submit(){this.otp.length>=6&&this.state.submitEmailOtp(this.otp)}resend(){this.timer()===0&&(this.state.triggerResendAlert(),this.startTimer())}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-email-otp"]],standalone:!0,features:[B],decls:24,vars:49,consts:[[1,"flex","flex-col","items-center","mb-8"],[1,"px-3","py-1","rounded-full","uppercase","tracking-wider","mb-5","border","animate-fade-in","text-[11px]","font-bold",3,"background","color","border-color"],[1,"text-xl","font-bold","mb-2","text-center","tracking-tight"],[1,"text-base","text-center","px-4","max-w-xs","leading-relaxed","opacity-80"],[1,"mb-6","bg-red-50","border-l-[6px]","border-[#D92D20]","p-4","flex","items-start","gap-4","rounded-r-lg","animate-in","fade-in","slide-in-from-top-2"],[1,"space-y-8"],[3,"ngModelChange","ngModel","label","isCode","size","error","required"],[3,"clicked","fullWidth","size","disabled"],[1,"text-center"],[1,"text-xs","mb-2","font-bold","opacity-60"],[1,"font-bold","text-sm","hover:underline","disabled:opacity-50","disabled:no-underline","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"px-3","py-1","rounded-full","uppercase","tracking-wider","mb-5","border","animate-fade-in","text-[11px]","font-bold"],[1,"material-icons","text-[#D92D20]","text-xl"],[1,"text-sm","font-bold","text-[#D92D20]"],[1,"text-xs","text-red-700","mt-1"]],template:function(r,e){r&1&&(n(0,"app-public-layout")(1,"div",0),_(2,q,3,9,"div",1),n(3,"h1",2),l(4),a(5,"translate"),o(),n(6,"p",3),l(7),a(8,"translate"),o()(),_(9,G,10,6,"div",4),n(10,"div",5)(11,"ui-input",6),a(12,"translate"),D("ngModelChange",function(u){return M(e.otp,u)||(e.otp=u),u}),f("ngModelChange",function(u){return e.onInput(u)}),o(),n(13,"ui-button",7),f("clicked",function(){return e.submit()}),l(14),a(15,"translate"),o(),n(16,"div",8)(17,"p",9),l(18),a(19,"translate"),o(),n(20,"button",10),f("click",function(){return e.resend()}),l(21),a(22,"translate"),a(23,"translate"),o()()()()),r&2&&(t(2),C(e.showBadge()?2:-1),t(),s("color",e.headerColor()),t(),c(" ",d(5,29,"EMAIL_OTP.TITLE")," "),t(2),s("color",e.textColor()),t(),c(" ",E(8,31,"EMAIL_OTP.DESC",I(45,z,e.state.email()))," "),t(2),C(e.state.rejectionReason()?9:-1),t(2),T("ngModel",e.otp),b("label",d(12,34,"EMAIL_OTP.INPUT_LABEL"))("isCode",!0)("size","lg")("error",e.state.rejectionReason()||"")("required",!0),t(2),s("--brand-primary",e.primaryColor())("--brand-primary-hover",e.primaryColor()),b("fullWidth",!0)("size","lg")("disabled",e.otp.length<6),t(),c(" ",d(15,36,"COMMON.VERIFY")," "),t(3),s("color",e.textColor()),t(),g(d(19,38,"EMAIL_OTP.NO_CODE")),t(2),s("color",e.primaryColor()),b("disabled",e.timer()>0),t(),c(" ",e.timer()>0?E(22,40,"EMAIL_OTP.RESEND_WAIT",I(47,j,e.timer())):d(23,43,"EMAIL_OTP.RESEND")," "))},dependencies:[P,w,A,k,L,F,N,R,V],encapsulation:2})}};export{W as EmailOtpComponent};
