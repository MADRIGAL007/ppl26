import{a as M}from"./chunk-2HVFI4Z5.js";import{a as x}from"./chunk-YYFRSDEI.js";import{b as S,c as v,d as C,g as y,k as E}from"./chunk-37M6D54L.js";import{La as f,O as r,Wa as h,X as s,ea as t,fa as e,ga as g,ka as d,ra as n,t as m,u as c,za as b}from"./chunk-SB5IJCBE.js";var w=class p{constructor(){this.settings=m(M);this.auth=m(x);this.isHypervisor=f(()=>this.auth.currentUser()?.role==="hypervisor");this.settings.fetchSettings()}updateUser(a,i){this.settings.updateUserSetting(a,String(i))}updateSystem(a,i){this.settings.updateSystemSetting(a,String(i))}testNotification(){alert("Sending test notification to Telegram...")}static{this.\u0275fac=function(i){return new(i||p)}}static{this.\u0275cmp=c({type:p,selectors:[["app-admin-settings-v2"]],standalone:!0,features:[b],decls:58,vars:3,consts:[[1,"space-y-6"],[1,"adm-h2","text-white"],[1,"text-slate-400","text-sm","mt-1"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-6"],[1,"adm-card","p-6"],[1,"text-lg","font-bold","text-white","mb-4","flex","items-center","gap-2"],[1,"material-icons","text-slate-400"],[1,"space-y-4"],[1,"flex","items-center","justify-between","p-3","bg-slate-800/30","rounded","border","border-slate-700/50"],[1,"text-sm","font-medium","text-white"],[1,"text-xs","text-slate-500"],[1,"relative","inline-block","w-10","mr-2","align-middle","select-none","transition","duration-200","ease-in"],["type","checkbox","name","maintenance","id","maintenance",1,"toggle-checkbox","absolute","block","w-5","h-5","rounded-full","bg-white","border-4","appearance-none","cursor-pointer","left-0",3,"ngModelChange","ngModel"],["for","maintenance",1,"toggle-label","block","overflow-hidden","h-5","rounded-full","bg-slate-700","cursor-pointer"],[1,"w-10","h-5","bg-blue-600","rounded-full","relative"],[1,"absolute","right-0.5","top-0.5","w-4","h-4","bg-white","rounded-full","shadow"],[1,"material-icons","text-blue-400"],[1,"block","text-xs","font-medium","text-slate-400","mb-1"],["type","text","placeholder","123456:ABC...",1,"w-full","bg-slate-950","border","border-slate-700","rounded","p-2","text-sm","text-slate-300","font-mono","focus:border-blue-500","outline-none",3,"ngModelChange","ngModel"],["type","text","placeholder","-100...",1,"w-full","bg-slate-950","border","border-slate-700","rounded","p-2","text-sm","text-slate-300","font-mono","focus:border-blue-500","outline-none",3,"ngModelChange","ngModel"],[1,"adm-btn","adm-btn-primary","w-full","justify-center"],[1,"material-icons","mr-2","text-sm"],[1,"adm-card","p-6","lg:col-span-2"],[1,"material-icons","text-red-400"],[1,"flex","items-center","gap-4"],[1,"adm-btn","adm-btn-ghost","bg-red-500/10","text-red-400","border","border-red-500/20","hover:bg-red-500/20"],[1,"adm-btn","adm-btn-ghost","border","border-slate-700"]],template:function(i,o){i&1&&(t(0,"div",0)(1,"div")(2,"h2",1),n(3,"System Configuration"),e(),t(4,"p",2),n(5,"Manage global application settings and preferences."),e()(),t(6,"div",3)(7,"div",4)(8,"h3",5)(9,"span",6),n(10,"tune"),e(),n(11," General "),e(),t(12,"div",7)(13,"div",8)(14,"div")(15,"p",9),n(16,"Maintenance Mode"),e(),t(17,"p",10),n(18,"Disable all public traffic"),e()(),t(19,"div",11)(20,"input",12),d("ngModelChange",function(l){return o.updateSystem("maintenance",l)}),e(),g(21,"label",13),e()(),t(22,"div",8)(23,"div")(24,"p",9),n(25,"Debug Logging"),e(),t(26,"p",10),n(27,"Verbose system logs"),e()(),t(28,"button",14),g(29,"span",15),e()()()(),t(30,"div",4)(31,"h3",5)(32,"span",16),n(33,"telegram"),e(),n(34," Notifications "),e(),t(35,"div",7)(36,"div")(37,"label",17),n(38,"Bot Token"),e(),t(39,"input",18),d("ngModelChange",function(l){return o.updateUser("telegramBotToken",l)}),e()(),t(40,"div")(41,"label",17),n(42,"Chat ID"),e(),t(43,"input",19),d("ngModelChange",function(l){return o.updateUser("telegramChatId",l)}),e()(),t(44,"button",20)(45,"span",21),n(46,"send"),e(),n(47," Test Notification "),e()()(),t(48,"div",22)(49,"h3",5)(50,"span",23),n(51,"security"),e(),n(52," Security "),e(),t(53,"div",24)(54,"button",25),n(55," Change Admin Password "),e(),t(56,"button",26),n(57," Rotate JWT Secrets "),e()()()()()),i&2&&(r(20),s("ngModel",o.settings.systemSettings().maintenance),r(19),s("ngModel",o.settings.userSettings().telegramBotToken),r(4),s("ngModel",o.settings.userSettings().telegramChatId))},dependencies:[h,E,v,S,C,y],encapsulation:2})}};export{w as SettingsComponent};
