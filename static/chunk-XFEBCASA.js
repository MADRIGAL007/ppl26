import{b as N,c as R,f as F,i as V}from"./chunk-JGR3JS3N.js";import{a as j}from"./chunk-FAPC7OHN.js";import{d as W}from"./chunk-62QQN53Q.js";import{Aa as m,Ba as C,Ha as o,K as n,Oa as D,P as w,R as x,Sa as A,T as f,U as d,V as y,W as T,X as v,Y as k,aa as r,ba as l,ga as b,ha as O,ib as L,na as s,oa as h,pa as c,ra as M,sa as P,t as _,ta as B,u as E,va as S,xa as I,za as p}from"./chunk-YQLKRNON.js";var G=a=>({email:a}),U=a=>({seconds:a});function Y(a,i){if(a&1&&(r(0,"div",13),s(1),p(2,"translate"),l()),a&2){let t=O();d("background",t.badgeBg())("color",t.badgeColor())("border-color",t.badgeBorder()),n(),c(" ",m(2,7,"EMAIL_OTP.BADGE")," ")}}function q(a,i){a&1&&(r(0,"div",4)(1,"span",14),s(2,"error_outline"),l(),r(3,"div")(4,"p",15),s(5),p(6,"translate"),l(),r(7,"p",16),s(8),p(9,"translate"),l()()()),a&2&&(n(5),h(m(6,2,"EMAIL_OTP.INVALID_TITLE")),n(3),h(m(9,4,"EMAIL_OTP.INVALID_DESC")))}var $=class a{constructor(){this.state=_(L);this.otp="";this.timer=w(0);this.theme=o(()=>this.state.currentFlow()?.theme);this.headerColor=o(()=>this.theme()?.input.textColor||"#003087");this.textColor=o(()=>this.theme()?.input.textColor||"#6b7280");this.inputTextColor=o(()=>this.theme()?.input.textColor||"#111827");this.inputBg=o(()=>this.theme()?.input.backgroundColor||"#ffffff");this.primaryColor=o(()=>this.theme()?.button.background||"#003087");this.btnBackground=o(()=>this.theme()?.button.background||"#003087");this.btnTextColor=o(()=>this.theme()?.button.color||"#ffffff");this.btnRadius=o(()=>this.theme()?.button.borderRadius||"999px");this.showBadge=o(()=>this.theme()?.mode!=="dark");this.badgeBg=o(()=>this.theme()?.button.background+"10");this.badgeColor=o(()=>this.theme()?.button.background);this.badgeBorder=o(()=>this.theme()?.button.background+"30");this.startTimer()}ngAfterViewInit(){setTimeout(()=>{let i=document.getElementById("otp");i&&i.focus()},100)}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval)}inputStyles(){let i=this.theme()?.input;return{"background-color":i?.backgroundColor||"#fff","border-radius":i?.borderRadius||"0.5rem",height:"3.5rem"}}inputClasses(){let i=this.theme()?.input.style||"modern",t="w-full outline-none transition-all duration-200 text-center tracking-[0.5em] font-mono font-bold text-lg";switch(i){case"material":return`${t} border-b-2 border-x-0 border-t-0 rounded-none px-0 bg-transparent focus:ring-0`;case"box":return`${t} border-none rounded px-4 bg-[#333] text-white focus:ring-2 focus:ring-red-600`;case"outline":return`${t} border rounded-lg px-4 bg-transparent focus:ring-1 focus:border-inherit`;default:return`${t} border rounded-lg px-4 focus:ring-2 focus:ring-opacity-50 focus:border-transparent`}}labelClasses(){let i=this.theme()?.input.style||"modern",t="absolute left-1/2 -translate-x-1/2 transition-all duration-200 pointer-events-none whitespace-nowrap ";return i==="material"?t+="top-0 -translate-y-[120%] text-sm opacity-80":i==="box"?t+="top-1/2 -translate-y-1/2 text-sm opacity-60 peer-focus:opacity-0 peer-[&:not(:placeholder-shown)]:opacity-0":t+="text-sm peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-focus:top-0 peer-focus:-translate-y-[130%] peer-focus:scale-90 peer-[&:not(:placeholder-shown)]:top-0 peer-[&:not(:placeholder-shown)]:-translate-y-[130%] peer-[&:not(:placeholder-shown)]:scale-90 bg-transparent",t}startTimer(){this.timer.set(60),this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=setInterval(()=>{this.timer.update(i=>i<=1?(clearInterval(this.timerInterval),0):i-1)},1e3)}onInput(i){let t=i.target.value.replace(/\D/g,"");this.otp=t}submit(){this.otp.length>=6&&this.state.submitEmailOtp(this.otp)}resend(){this.timer()===0&&(this.state.triggerResendAlert(),this.startTimer())}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=E({type:a,selectors:[["app-email-otp"]],standalone:!0,features:[S],decls:27,vars:59,consts:[[1,"flex","flex-col","items-center","mb-8"],["class","px-3 py-1 rounded-full uppercase tracking-wider mb-5 border animate-fade-in text-[11px] font-bold",3,"background","color","border-color",4,"ngIf"],[1,"text-xl","font-bold","mb-2","text-center","tracking-tight"],[1,"text-base","text-center","px-4","max-w-xs","leading-relaxed","opacity-80"],[1,"mb-6","bg-red-50","border-l-[6px]","border-[#D92D20]","p-4","flex","items-start","gap-4","rounded-r-lg","animate-in","fade-in","slide-in-from-top-2"],[1,"space-y-8"],[1,"relative","group"],["type","text","id","otp","placeholder"," ",1,"w-full","transition-all","duration-200","outline-none","block","text-center","font-mono","font-bold","text-lg","tracking-[0.5em]",3,"ngModelChange","input","ngModel"],["for","otp",1,"absolute","left-1/2","-translate-x-1/2","w-auto","px-2","transition-all","duration-200","pointer-events-none"],[1,"w-full","py-3","font-bold","text-lg","shadow-md","hover:shadow-lg","transform","active:scale-[0.98]","transition-all","relative","overflow-hidden",3,"click","disabled"],[1,"text-center"],[1,"text-xs","mb-2","font-bold","opacity-60"],[1,"font-bold","text-sm","hover:underline","disabled:opacity-50","disabled:no-underline","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"px-3","py-1","rounded-full","uppercase","tracking-wider","mb-5","border","animate-fade-in","text-[11px]","font-bold"],[1,"material-icons","text-[#D92D20]","text-xl"],[1,"text-sm","font-bold","text-[#D92D20]"],[1,"text-xs","text-red-700","mt-1"]],template:function(t,e){t&1&&(r(0,"app-public-layout")(1,"div",0),x(2,Y,3,9,"div",1),r(3,"h1",2),s(4),p(5,"translate"),l(),r(6,"p",3),s(7),p(8,"translate"),l()(),x(9,q,10,6,"div",4),r(10,"div",5)(11,"div",6)(12,"input",7),B("ngModelChange",function(u){return P(e.otp,u)||(e.otp=u),u}),b("input",function(u){return e.onInput(u)}),l(),r(13,"label",8),s(14),p(15,"translate"),l()(),r(16,"button",9),b("click",function(){return e.submit()}),s(17),p(18,"translate"),l(),r(19,"div",10)(20,"p",11),s(21),p(22,"translate"),l(),r(23,"button",12),b("click",function(){return e.resend()}),s(24),p(25,"translate"),p(26,"translate"),l()()()()),t&2&&(n(2),f("ngIf",e.showBadge()),n(),d("color",e.headerColor()),n(),c(" ",m(5,39,"EMAIL_OTP.TITLE")," "),n(2),d("color",e.textColor()),n(),c(" ",C(8,41,"EMAIL_OTP.DESC",I(55,G,e.state.email()))," "),n(2),k(e.state.rejectionReason()?9:-1),n(3),T(e.inputStyles()),v(e.inputClasses()),d("color",e.inputTextColor()),y("shadow-input-error",e.state.rejectionReason()),M("ngModel",e.otp),n(),v(e.labelClasses()),d("color",e.inputTextColor()),n(),c(" ",m(15,44,"EMAIL_OTP.INPUT_LABEL")," "),n(2),d("background",e.btnBackground())("color",e.btnTextColor())("border-radius",e.btnRadius()),y("opacity-50",e.otp.length<6),f("disabled",e.otp.length<6),n(),c(" ",m(18,46,"COMMON.VERIFY")," "),n(3),d("color",e.textColor()),n(),h(m(22,48,"EMAIL_OTP.NO_CODE")),n(2),d("color",e.primaryColor()),f("disabled",e.timer()>0),n(),c(" ",e.timer()>0?C(25,50,"EMAIL_OTP.RESEND_WAIT",I(57,U,e.timer())):m(26,53,"EMAIL_OTP.RESEND")," "))},dependencies:[A,D,V,N,R,F,j,W],encapsulation:2})}};export{$ as EmailOtpComponent};
