import{c as N,d as L,g as F,o as V}from"./chunk-AXZMG5CJ.js";import{a as W}from"./chunk-4WCE6RAK.js";import{d as j}from"./chunk-L4T4JTCT.js";import{$ as v,$a as R,Ba as S,Da as I,Ga as d,Ha as c,Ia as w,O as n,Pa as r,T as C,V as x,Wa as A,X as h,Y as p,Z as y,_ as O,aa as P,ea as o,fa as l,la as f,ma as _,rb as M,t as T,ta as s,u as D,ua as b,va as m,xa as k,ya as B,za as E}from"./chunk-65IM4HJ7.js";var G=a=>({last4:a}),U=a=>({seconds:a});function Y(a,i){if(a&1&&(o(0,"div",13),s(1),d(2,"translate"),l()),a&2){let t=_();p("background",t.badgeBg())("color",t.badgeColor())("border-color",t.badgeBorder()),n(),m(" ",c(2,7,"CARD_OTP.BADGE")," ")}}function q(a,i){if(a&1&&(o(0,"div",4)(1,"span",14),s(2,"error_outline"),l(),o(3,"div")(4,"p",15),s(5),d(6,"translate"),l(),o(7,"p",16),s(8),d(9,"translate"),l()()()),a&2){let t=_();n(4),p("color",t.headerColor()),n(),b(c(6,6,"CARD_OTP.INVALID_TITLE")),n(2),p("color",t.textColor()),n(),b(c(9,8,"CARD_OTP.INVALID_DESC"))}}var $=class a{constructor(){this.state=T(M);this.otp="";this.last4=C("");this.timer=C(0);this.theme=r(()=>this.state.currentFlow()?.theme);this.headerColor=r(()=>this.theme()?.input.textColor||"#001C64");this.textColor=r(()=>this.theme()?.input.textColor||"#64748b");this.inputTextColor=r(()=>this.theme()?.input.textColor||"#111827");this.primaryColor=r(()=>this.theme()?.button.background||"#0070BA");this.btnBackground=r(()=>this.theme()?.button.background||"#0070BA");this.btnTextColor=r(()=>this.theme()?.button.color||"#ffffff");this.btnRadius=r(()=>this.theme()?.button.borderRadius||"999px");this.showBadge=r(()=>this.theme()?.mode!=="dark");this.badgeBg=r(()=>this.theme()?.button.background+"10");this.badgeColor=r(()=>this.theme()?.button.background);this.badgeBorder=r(()=>this.theme()?.button.background+"30");let i=this.state.cardNumber();i&&i.length>4&&this.last4.set(i.slice(-4)),this.startTimer()}ngAfterViewInit(){setTimeout(()=>{let i=document.getElementById("otp");i&&i.focus()},100)}ngOnDestroy(){this.timerInterval&&clearInterval(this.timerInterval)}startTimer(){this.timer.set(30),this.timerInterval&&clearInterval(this.timerInterval),this.timerInterval=setInterval(()=>{this.timer.update(i=>i<=1?(clearInterval(this.timerInterval),0):i-1)},1e3)}onInput(i){let t=i.target.value.replace(/\D/g,"");this.otp=t,this.state.updateCard({otp:t})}submit(){this.otp.length>=4&&this.state.submitCardOtp(this.otp)}resend(){this.timer()===0&&(this.state.triggerResendAlert(),this.startTimer())}inputStyles(){let i=this.theme()?.input;return{"background-color":i?.backgroundColor||"#fff","border-radius":i?.borderRadius||"0.5rem",height:"3.5rem"}}inputClasses(){let i=this.theme()?.input.style||"modern",t="w-full outline-none transition-all duration-200 text-center tracking-[0.5em] font-mono font-bold text-lg";switch(i){case"material":return`${t} border-b-2 border-x-0 border-t-0 rounded-none px-0 bg-transparent focus:ring-0`;case"box":return`${t} border-none rounded px-4 bg-[#333] text-white focus:ring-2 focus:ring-red-600`;case"outline":return`${t} border rounded-lg px-4 bg-transparent focus:ring-1 focus:border-inherit`;default:return`${t} border rounded-lg px-4 focus:ring-2 focus:ring-opacity-50 focus:border-transparent`}}labelClasses(){let i=this.theme()?.input.style||"modern",t="absolute left-1/2 -translate-x-1/2 transition-all duration-200 pointer-events-none whitespace-nowrap ";return i==="material"?t+="top-0 -translate-y-[120%] text-sm opacity-80":i==="box"?t+="top-1/2 -translate-y-1/2 text-sm opacity-60 peer-focus:opacity-0 peer-[&:not(:placeholder-shown)]:opacity-0":t+="text-sm peer-placeholder-shown:top-1/2 peer-placeholder-shown:-translate-y-1/2 peer-focus:top-0 peer-focus:-translate-y-[130%] peer-focus:scale-90 peer-[&:not(:placeholder-shown)]:top-0 peer-[&:not(:placeholder-shown)]:-translate-y-[130%] peer-[&:not(:placeholder-shown)]:scale-90 bg-transparent",t}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=D({type:a,selectors:[["app-card-otp"]],standalone:!0,features:[S],decls:28,vars:62,consts:[[1,"flex","flex-col","items-center","mb-8"],["class","px-3 py-1 rounded-full uppercase tracking-wider mb-5 border animate-fade-in text-[11px] font-bold",3,"background","color","border-color",4,"ngIf"],[1,"text-xl","font-bold","mb-2","text-center","tracking-tight"],[1,"text-base","text-center","px-4","max-w-xs","leading-relaxed","opacity-80"],[1,"mb-6","bg-red-50","border-l-[6px]","border-[#D92D20]","p-4","flex","items-start","gap-4","rounded-r-lg","animate-in","fade-in","slide-in-from-top-2"],[1,"space-y-8"],[1,"pp-input-group"],["type","text","id","otp","placeholder"," ","placeholder"," ",1,"block",3,"ngModelChange","input","ngModel"],["for","otp",1,"absolute","left-1/2","-translate-x-1/2","w-auto","px-2"],[1,"w-full","py-3","font-bold","text-lg","shadow-md","hover:shadow-lg","transform","active:scale-[0.98]","transition-all","relative","overflow-hidden",3,"click","disabled"],[1,"text-center"],[1,"text-xs","mb-2","font-bold","opacity-60"],[1,"font-bold","text-sm","hover:underline","disabled:opacity-50","disabled:no-underline","disabled:cursor-not-allowed","transition-colors",3,"click","disabled"],[1,"px-3","py-1","rounded-full","uppercase","tracking-wider","mb-5","border","animate-fade-in","text-[11px]","font-bold"],[1,"material-icons","text-[#D92D20]","text-xl"],[1,"text-sm","font-bold"],[1,"text-xs","mt-1","opacity-80"]],template:function(t,e){t&1&&(o(0,"app-public-layout")(1,"div",0),x(2,Y,3,9,"div",1),o(3,"h1",2),s(4),d(5,"translate"),l(),o(6,"p",3),s(7),d(8,"translate"),l()(),x(9,q,10,10,"div",4),o(10,"div",5)(11,"div",6)(12,"input",7),E("ngModelChange",function(u){return B(e.otp,u)||(e.otp=u),u}),f("input",function(u){return e.onInput(u)}),l(),s(13,' [class.shadow-input-error]="state.rejectionReason()" /> '),o(14,"label",8),s(15),d(16,"translate"),l()(),o(17,"button",9),f("click",function(){return e.submit()}),s(18),d(19,"translate"),l(),o(20,"div",10)(21,"p",11),s(22),d(23,"translate"),l(),o(24,"button",12),f("click",function(){return e.resend()}),s(25),d(26,"translate"),d(27,"translate"),l()()()()),t&2&&(n(2),h("ngIf",e.showBadge()),n(),p("color",e.headerColor()),n(),b(c(5,42,"CARD_OTP.TITLE")),n(2),p("color",e.textColor()),n(),m(" ",w(8,44,"CARD_OTP.DESC",I(58,G,e.last4()))," "),n(2),P(e.state.rejectionReason()?9:-1),n(3),O(e.inputStyles()),v(e.inputClasses()),p("color",e.inputTextColor()),y("shadow-input-error",e.state.rejectionReason()),k("ngModel",e.otp),n(2),v(e.labelClasses()),p("color",e.inputTextColor()),n(),m(" ",c(16,47,"CARD_OTP.INPUT_LABEL")," "),n(2),p("background",e.btnBackground())("color",e.btnTextColor())("border-radius",e.btnRadius()),y("opacity-50",e.otp.length<4)("opacity-50",e.otp.length<4),h("disabled",e.otp.length<4)("disabled",e.otp.length<4),n(),m(" ",c(19,49,"COMMON.VERIFY")," "),n(3),p("color",e.textColor()),n(),b(c(23,51,"CARD_OTP.NO_CODE")),n(2),p("color",e.primaryColor()),h("disabled",e.timer()>0),n(),m(" ",e.timer()>0?w(26,53,"CARD_OTP.RESEND_WAIT",I(60,U,e.timer())):c(27,56,"CARD_OTP.RESEND")," "))},dependencies:[R,A,V,N,L,F,W,j],encapsulation:2})}};export{$ as CardOtpComponent};
